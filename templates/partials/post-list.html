{% if posts and posts|length > 0 %}
  {% for post in posts %}
    {% set thumb_guess = post.img_url.replace('hero.webp', 'thumb.webp') if post.img_url else '/static/assets/img/placeholder-thumb.jpg' %}

    <article class="wf-post mb-4">
      <!-- Thumb -->
      <a href="{{ url_for('show_post', slug=post.slug) }}" class="wf-thumb-link" aria-label="{{ post.title }}">
        <div class="ratio ratio-16x9 wf-thumb-box">
          <img src="{{ thumb_guess }}" alt="{{ post.title }}" class="wf-thumb-img" loading="lazy">
        </div>
      </a>

      <!-- Content -->
      <div class="wf-content">
        <a href="{{ url_for('show_post', slug=post.slug) }}" class="wf-titlelink">
          <h2 class="wf-title">{{ post.title }}</h2>
          <p class="wf-subtitle">{{ post.subtitle }}</p>
        </a>
        <p class="wf-meta mb-0">
          Posted by
          <a href="/about#author"
             class="wf-author"
             data-author="{{ post.author.name }}">{{ post.author.name }}</a>
          on {{ post.date }}
          {% if current_user.is_authenticated and current_user.id == 1 %}
            <a
              href="{{ url_for('delete_post', post_id=post.id) }}"
              class="text-danger ms-2"
              aria-label="Delete post"
              onclick="return confirm('Are you sure you want to delete this post? This action cannot be undone.');"
            >
              âœ˜
            </a>
          {% endif %}
        </p>
      </div>
    </article>

    <hr class="my-4">
  {% endfor %}
{% else %}
  <!-- WonderFloyd Empty State -->
  <div class="wf-empty" role="status" aria-live="polite">
    <span class="wf-empty-icon" aria-hidden="true">
      <i class="fas fa-circle-info"></i>
    </span>
    <div class="wf-empty-title">No posts yet.</div>
    <div class="wf-empty-sub">New posts are on the way.</div>
  </div>
{% endif %}
